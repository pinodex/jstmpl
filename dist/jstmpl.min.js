/*! jstmpl 1.0.0 Built: 2015-06-06T14:37:18 | Copyright (c) 2015 Raphael Marco */
!function(){"use strict";window.Jstmpl=function(a){if(String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),this.options=a||{},this.context=this.options.context||document,this.fn={raw:function(a){return Jstmpl_Helpers.htmlUnescape(a)}},window.jstmpl_defaults)for(var b=Object.keys(window.jstmpl_defaults),c=b.length-1;c>=0;c--)this.options[b[c]]=window.jstmpl_defaults[b[c]];if(this.options.fn)for(var d=Object.keys(this.options.fn),c=d.length-1;c>=0;c--)this.fn[d[c]]=this.options.fn[d[c]]},window.Jstmpl.prototype.addFunction=function(a,b){this.fn[a]=b},window.Jstmpl.prototype.debug=function(){return this.options.debug?{log:function(){console.log.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)}}:{log:function(){},warn:function(){},error:function(){}}},window.Jstmpl.prototype.template=function(a){return new Jstmpl_Template(this,a)},window.Jstmpl_Helpers={htmlEscape:function(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},htmlUnescape:function(a){return String(a).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}},window.Jstmpl_Template=function(a,b){this.jstmpl=a,this.elements=a.context.querySelectorAll('[data-template="'+b+'"]')},window.Jstmpl_Template.prototype.callback=function(a){a(this.elements)},window.Jstmpl_Template.prototype.conditionTests={equals:function(){return arguments[0]==arguments[1]},"==":function(){return this.equals(arguments[0],arguments[1])},startsWith:function(){return 0==arguments[0].indexOf(arguments[1])},startswith:function(){return this.startsWith(arguments[0],arguments[1])},contains:function(){return arguments[0].indexOf(arguments[1])>=0},is:function(){return"empty"==arguments[1]?!arguments[0]:!1}},window.Jstmpl_Template.prototype.parse=function(a,b){a=a||{};var b=b||this.elements[0].innerHTML;return b?(b=this.parseConditionals(b,a),b=this.parseForloops(b,a),b=this.parseVariables(b,a),b.trim()):null},window.Jstmpl_Template.prototype.parseConditionals=function(a,b){for(var c;null!=(c=this.regExp.conditionals.exec(a));){var d=c[1].replace(/ +/g," ").trim().split(" "),e=d[0],f=!1;"not"==e&&(d=d.splice(1),e=d[0],f=!0),"!"==e.charAt(0)&&(e=e.substr(1),f=!0),e in b||this.jstmpl.debug().warn('Jstmpl: Undefined variable "%s".',e);var g=b[e];if(c[0]=new RegExp(c[0].replace(/\|/g,"\\|"),"gm"),f||1!=d.length||!g){if(d[1]){var h=/["'](.*?)["']/.test(arguments[2]),i=/(true|false)/i.test(arguments[2]);h&&(d[2]=d[2].replace(/["'](.*?)["']/,"$1")),!h&&b[d[2]]&&(d[2]=b[d[2]]),i&&(d[2]="true"===d[2].toLowerCase());var j;(j=this.conditionTests[d[1]])&&(g=j(b[e],d[2])),j||(this.jstmpl.debug().warn('Jstmpl: Undefined test function "%s".',d[1]),g=!1,f=!1)}f&&(g=!g),a=g?a.replace(c[0],this.parse(b,c[2])):a.replace(c[0],"")}else a=a.replace(c[0],this.parse(b,c[2]))}return a},window.Jstmpl_Template.prototype.parseForloops=function(a,b){for(var c;null!=(c=this.regExp.forloops.exec(a));){var d=b[c[2]],e="";if(c[1]=c[1].replace(/ +/g," ").trim().split(","),1==c[1].length||2==c[1].length)if(d){for(var f=Object.keys(d),g={},h=0;h<f.length;h++){var i=Object.prototype.toString.call(d);"[object Array]"==i&&(g[c[1][0]]=String(d[h])),"[object Object]"==i&&(g[c[1][0]]=String(f[h])),2==c[1].length&&(g[c[1][1]]=String(d[f[h]])),e+=this.parse(g,c[3])}c[0]=c[0].replace(/\|/g,"\\|"),a=a.replace(new RegExp(c[0],"gm"),e)}else this.jstmpl.debug().error('Jstmpl: Undefined variable "%s".',c[2]);else this.jstmpl.debug().error('Jstmpl: Invalid variable count for "%s" for loop.',c[2])}return a},window.Jstmpl_Template.prototype.parseVariables=function(a,b){for(var c=a.match(this.regExp.variables)||[],d=c.length-1;d>=0;d--){var e=c[d].substr(3,c[d].length-6).split("|");e[0]=e[0].split(".");var f=b[e[0][0]];if(f){if(e[0].length>1)for(var g=1;g<e[0].length;g++)f?f=f[e[0][g]]:this.jstmpl.debug().error('Jstmpl: Undefined variable "%s" from "%s".',e[0][g],e[0].join("."));if(c[d]=c[d].replace(/\|/g,"\\|"),f=Jstmpl_Helpers.htmlEscape(f),e.length>1)for(var h=e.length-1;h>=1;h--)e[h]&&(e[h]in this.fn?f=this.fn[e[h]](f):this.jstmpl.debug().error('Jstmpl: Undefined function "%s".',e[h]));a=a.replace(new RegExp(c[d],"gm"),f)}else this.jstmpl.debug().error('Jstmpl: Undefined variable "%s".',e[0].join("."))}return a},window.Jstmpl_Template.prototype.regExp={variables:new RegExp("{{ ([^}]+) }}","gm"),forloops:new RegExp("{% for (.*?) in (.*?) %}((.*?|\n)+?){% endfor %}","gm"),conditionals:new RegExp("{% if (.*?) %}((.*?|\n)+?){% endif %}","gm")},window.Jstmpl_Template.prototype.render=function(a){a=a||{};for(var b=this.parse(a),c=this.elements.length-1;c>=0;c--){var d;if(d=this.elements[c].getAttribute("data-target"))for(var e=this.jstmpl.context.querySelectorAll(d),c=e.length-1;c>=0;c--)e[c].innerHTML=b;else this.elements[c].innerHTML=b}return this}}();