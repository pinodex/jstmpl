/**
 * jstmpl
 * Simple JavaScript Templating Engine
 *
 * @author    Raphael Marco <pinodex@outlook.ph>
 * @link      http://pinodex.github.io
 * @license   MIT
 */
(function(){window.Jstmpl=function(a){this.options=a||{};this.context=this.options.context||document;this.patterns={variable:RegExp("{{ ([^}]+) }}","gm")};this.fn={raw:function(a){return Jstmpl_Helpers.htmlUnescape(a)}};if(this.options.fn){a=Object.keys(this.options.fn);for(var c=a.length-1;0<=c;c--)this.fn[a]=this.options.fn[a]}this.render=function(a,l,c){var g=this.context.querySelectorAll('[data-template="'+a+'"]');l=l||{};if(!g)return new Jstmpl_Template(this,a);for(var d=g.length-1;0<=d;d--){var m=
g[d].innerHTML,b=m.match(this.patterns.variable);if(b){for(var e=b.length-1;0<=e;e--){var f=b[e].substr(3,b[e].length-6).split("|"),h=l[f[0]];if(h){b[e]=b[e].replace(/\|/g,"\\|");h=Jstmpl_Helpers.htmlEscape(h);if(1<f.length)for(var k=f.length-1;1<=k;k--)f[k]&&(f[k]in this.fn?h=this.fn[f[k]](h):this.debug().warn('Jstmpl: function "%s" is not defined.',f[k]));m=m.replace(new RegExp(b[e],"gm"),h)}}if(b=g[d].getAttribute("data-target"))for(b=this.context.querySelectorAll(b),d=b.length-1;0<=d;d--)b[d].innerHTML=
m;else g[d].innerHTML=m}}"function"===typeof c&&c(g);return new Jstmpl_Template(this,a)};this.addFunction=function(a,c){this.fn[a]=c};this.debug=function(){return this.options.debug?{log:function(){console.log.apply(console,arguments)},warn:function(){console.warn.apply(console,arguments)},error:function(){console.error.apply(console,arguments)}}:{log:function(){},warn:function(){},error:function(){}}}};window.Jstmpl_Template=function(a,c){this.template=a;this.name=c;this.parse=function(a,l){this.template.render(c,
a,l);return this}};window.Jstmpl_Helpers={htmlEscape:function(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},htmlUnescape:function(a){return String(a).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}}})();